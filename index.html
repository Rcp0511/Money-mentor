<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Investing Vocab Quiz</title>
<style>
body { font-family:sans-serif; margin:0; background:#e0f5e0; }
header { background:#1b5e20; color:white; text-align:center; padding:20px; font-size:1.8em; }
.container { max-width:700px; margin:30px auto; }
.unit-card { background:#4caf50; padding:20px; border-radius:12px; color:white; cursor:pointer; margin-bottom:20px; }
.unit-dropdown { display:none; margin-top:10px; }
.unit-dropdown button { padding:10px; margin-right:10px; border:none; border-radius:8px; cursor:pointer; color:white; }
.study-btn { background:#2e7d32; }
.test-btn { background:#1b5e20; }
#quizOverlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; }
.quiz-container { background:white; padding:20px; border-radius:12px; width:90%; max-width:600px; max-height:90%; overflow-y:auto; position:relative; }
#closeOverlay { position:absolute; top:10px; right:15px; cursor:pointer; font-size:1.5em; }
button.option { display:block; width:100%; margin:5px 0; padding:10px; border:1px solid #ccc; border-radius:8px; cursor:pointer; text-align:left; background:#f9f9f9; }
button.option.selected { background:#d4edda; border-color:#28a745; }
.controls { display:flex; justify-content:space-between; margin-top:10px; }
#flagBtn { font-size:1.3em; cursor:pointer; background:none; border:none; }
#flagBtn.flagged { color:red; }
.progress-bar { height:12px; background:#eee; border-radius:6px; margin-top:10px; overflow:hidden; }
.progress { height:100%; width:0%; background:#28a745; transition:0.3s; }
.review-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(50px,1fr)); gap:5px; margin-bottom:10px; }
.review-box { padding:10px; border-radius:6px; text-align:center; cursor:pointer; }
.review-box.answered { background:#ccc; }
.review-box.notanswered { background:#e57373; color:white; }
.review-box.flagged::after { content:"⚑"; color:red; position:absolute; right:5px; top:5px; }
.score-screen ul { list-style:none; padding:0; text-align:left; }
.score-screen li.correct { color:green; }
.score-screen li.wrong { color:red; }
.restart-btn { margin-top:10px; padding:10px; border:none; border-radius:8px; background:#28a745; color:white; cursor:pointer; }
</style>
</head>
<body>

<header>Student Dashboard</header>
<div class="container" id="unitContainer"></div>

<div id="quizOverlay">
  <div class="quiz-container">
    <span id="closeOverlay">&times;</span>

    <div id="startScreen">
      <h2>Unit 1: Investing Vocab</h2>
      <button id="startBtn">Start Quiz</button>
      <p id="scoreInfo"></p>
    </div>

    <div id="quiz" style="display:none;">
      <div id="questionNumber"></div>
      <div id="question"></div>
      <div id="options"></div>
      <div class="controls">
        <button id="prevBtn">Previous</button>
        <button id="flagBtn">⚑</button>
        <button id="nextBtn">Next</button>
      </div>
      <div class="progress-bar"><div class="progress" id="progress"></div></div>
    </div>

    <div id="review" style="display:none;">
      <h3>Review Your Questions</h3>
      <div class="review-grid" id="reviewGrid"></div>
      <button id="submitBtn" class="restart-btn">Submit Quiz</button>
    </div>

    <div id="scoreScreen" style="display:none;">
      <h3 id="scoreText"></h3>
      <ul id="missedList"></ul>
      <p id="lastScoreText"></p>
      <p id="highScoreText"></p>
      <button id="restartBtn" class="restart-btn">Restart Quiz</button>
    </div>

  </div>
</div>

<script>
// ------------------ Units ------------------
const units = [{name:"Unit 1: Investing Vocab"}];
const container = document.getElementById('unitContainer');
units.forEach(unit => {
  const card = document.createElement('div'); card.className='unit-card';
  card.textContent = unit.name;
  card.onclick = ()=>quizOverlay.style.display='flex';
  container.appendChild(card);
});

// ------------------ Quiz Data ------------------
const quizData=[
{q:"What is a 'stock'?",a:["A share of ownership in a company","A short-term loan","A company expense","A bank account"],correct:0,explanation:"A stock represents ownership in a company."},
{q:"What is a 'bond'?",a:["A loan to a company or government","Ownership in a company","Debt you own","A savings account"],correct:0,explanation:"A bond is a loan you give to a company or government."},
{q:"What is an 'asset'?",a:["Something valuable you own","Debt you owe","Company liability","Stock market"],correct:0,explanation:"An asset is something valuable that you own."},
{q:"What is a 'liability'?",a:["Debt you owe","Investment gain","Stock","Dividend"],correct:0,explanation:"A liability is money you owe."},
{q:"What is a 'dividend'?",a:["Payment to shareholders","Company cost","Loan","Interest"],correct:0,explanation:"Dividends are payments made to shareholders."},
{q:"What is 'capital'?",a:["Money used for investment","Company revenue","Stock price","Debt"],correct:0,explanation:"Capital is money used to invest."},
{q:"What is a 'portfolio'?",a:["Collection of investments","Bank account","Single stock","Loan"],correct:0,explanation:"A portfolio is all your investments together."},
{q:"What is 'risk'?",a:["Chance of losing money","Guaranteed profit","Company stock","Interest rate"],correct:0,explanation:"Risk is the chance that you may lose money."},
{q:"What is 'liquidity'?",a:["How easily an asset can be turned into cash","Investment type","Profit","Stock index"],correct:0,explanation:"Liquidity is how quickly you can convert an asset to cash."},
{q:"What is 'interest'?",a:["Payment for borrowed money","Profit from stocks","Company revenue","Loan type"],correct:0,explanation:"Interest is what you pay for borrowing money."}
];

// ------------------ DOM ------------------
const quizOverlay=document.getElementById('quizOverlay');
const closeOverlay=document.getElementById('closeOverlay');
const startScreen=document.getElementById('startScreen');
const startBtn=document.getElementById('startBtn');
const scoreInfo=document.getElementById('scoreInfo');
const quizDiv=document.getElementById('quiz');
const questionNumberEl=document.getElementById('questionNumber');
const questionEl=document.getElementById('question');
const optionsEl=document.getElementById('options');
const prevBtn=document.getElementById('prevBtn');
const nextBtn=document.getElementById('nextBtn');
const flagBtn=document.getElementById('flagBtn');
const progressEl=document.getElementById('progress');
const reviewDiv=document.getElementById('review');
const reviewGrid=document.getElementById('reviewGrid');
const submitBtn=document.getElementById('submitBtn');
const scoreScreen=document.getElementById('scoreScreen');
const scoreText=document.getElementById('scoreText');
const missedList=document.getElementById('missedList');
const lastScoreText=document.getElementById('lastScoreText');
const highScoreText=document.getElementById('highScoreText');
const restartBtn=document.getElementById('restartBtn');

let current=0, answers=[], flags=[], shuffledQuiz=[];

function shuffleArray(array){return array.map(v=>({v,sort:Math.random()})).sort((a,b)=>a.sort-b.sort).map(({v})=>v);}

// ------------------ Functions ------------------
closeOverlay.onclick=()=>quizOverlay.style.display='none';

startBtn.onclick=()=>{
  startScreen.style.display='none';
  quizDiv.style.display='block';
  current=0;
  answers=Array(quizData.length).fill(null);
  flags=Array(quizData.length).fill(false);
  shuffledQuiz=shuffleArray(quizData);
  loadQuestion();
};

function loadQuestion(){
  const q=shuffledQuiz[current];
  questionNumberEl.textContent=`Question ${current+1} of ${shuffledQuiz.length}`;
  questionEl.textContent=q.q;
  optionsEl.innerHTML='';
  const optOrder=shuffleArray([0,1,2,3]);
  optOrder.forEach(i=>{
    const btn=document.createElement('button');
    btn.className='option';
    btn.textContent=q.a[i];
    if(answers[current]===i) btn.classList.add('selected');
    btn.onclick=()=>{
      answers[current]=i;
      Array.from(optionsEl.children).forEach(b=>b.classList.remove('selected'));
      btn.classList.add('selected');
    };
    optionsEl.appendChild(btn);
  });
  flagBtn.classList.toggle('flagged',flags[current]);
  progressEl.style.width=`${((current+1)/shuffledQuiz.length)*100}%`;
  nextBtn.textContent=current===shuffledQuiz.length-1?'Review':'Next';
}

prevBtn.onclick=()=>{if(current>0){current--;loadQuestion();}};
nextBtn.onclick=()=>{
  if(current<shuffledQuiz.length-1){current++;loadQuestion();} else showReview();
};
flagBtn.onclick=()=>{flags[current]=!flags[current];flagBtn.classList.toggle('flagged',flags[current]);};

function showReview(){
  quizDiv.style.display='none';
  reviewDiv.style.display='block';
  reviewGrid.innerHTML='';
  shuffledQuiz.forEach((q,i)=>{
    const box=document.createElement('div');
    box.className='review-box';
    if(answers[i]===null) box.classList.add('notanswered');
    else box.classList.add('answered');
    if(flags[i]) box.classList.add('flagged');
    box.textContent=i+1;
    box.onclick=()=>{current=i; reviewDiv.style.display='none'; quizDiv.style.display='block'; loadQuestion();}
    reviewGrid.appendChild(box);
  });
}

submitBtn.onclick=()=>{
  reviewDiv.style.display='none';
  scoreScreen.style.display='block';
  let correctCount=0;
  missedList.innerHTML='';
  shuffledQuiz.forEach((q,i)=>{
    const user=answers[i];
    if(user===q.correct) correctCount++;
    const li=document.createElement('li');
    li.className=user===q.correct?'correct':'wrong';
    li.textContent=`Q${i+1}: Your: ${user!==null?q.a[user]:'Not Answered'} | Correct: ${q.a[q.correct]} | ${q.explanation}`;
    missedList.appendChild(li);
  });
  const percent=Math.round((correctCount/shuffledQuiz.length)*100);
  scoreText.textContent=`You scored ${percent}% (${correctCount} of ${shuffledQuiz.length})`;
  localStorage.setItem('lastUnit1Score',percent);
  const highScore=localStorage.getItem('highUnit1Score');
  if(!highScore || percent>highScore) localStorage.setItem('highUnit1Score',percent);
  lastScoreText.textContent=`Last Unit Test Score: ${percent}%`;
  highScoreText.textContent=`Highest Unit Test Score: ${localStorage.getItem('highUnit1Score')}%`;
};

restartBtn.onclick=()=>{scoreScreen.style.display='none'; startScreen.style.display='block';};
</script>

</body>
</html>
