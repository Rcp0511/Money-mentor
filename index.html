<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unit 1 Quiz Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
<style>
/* ---------- Global Styles ---------- */
body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    background: #f4f7fa;
    color: #1c1e21;
}

header {
    background: #1976d2;
    color: white;
    padding: 25px 0;
    text-align: center;
    font-size: 2em;
    font-weight: 700;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

/* ---------- Container ---------- */
.container {
    max-width: 1000px;
    margin: 30px auto;
    padding: 0 20px;
}

/* ---------- Unit Card ---------- */
.unit-card {
    background: linear-gradient(145deg,#42a5f5,#1e88e5);
    border-radius: 16px;
    margin-bottom: 20px;
    padding: 18px 25px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.15);
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
}
.unit-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
}

.unit-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
}
.unit-header .title {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 600;
    font-size: 1.2em;
    color: white;
}
.unit-header .scores {
    font-size: 0.95em;
    color: #e3f2fd;
}
.unit-complete {
    font-weight: 700;
    color: #ffd700;
}
.unit-dropdown {
    display: none;
    flex-direction: row;
    gap: 15px;
    margin-top: 15px;
}
.unit-dropdown button {
    padding: 12px 18px;
    border: none;
    border-radius: 12px;
    font-size: 1em;
    font-weight: 500;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: transform 0.2s, opacity 0.2s;
}
.unit-dropdown button:hover {
    transform: translateY(-2px);
}
.study-btn { background: #43a047; }
.test-btn { background: #1b5e20; }

/* ---------- Quiz Overlay ---------- */
#quizOverlay {
    display: none;
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.6);
    justify-content: center;
    align-items: center;
    z-index: 1000;
    overflow: auto;
}

.quiz-container {
    background: #fff;
    border-radius: 20px;
    padding: 30px;
    width: 95%;
    max-width: 900px;
    min-height: 650px;
    position: relative;
    margin: 50px auto;
    box-shadow: 0 8px 25px rgba(0,0,0,0.25);
    overflow-y: auto;
}

/* ---------- Close & Flag ---------- */
#closeQuiz {
    position: absolute;
    top: 20px;
    right: 20px;
    font-size: 1.8em;
    cursor: pointer;
    color: #1976d2;
}
#flagBtn {
    position: absolute;
    top: 20px;
    right: 60px;
    font-size: 1.4em;
    background: none;
    border: none;
    cursor: pointer;
    color: red;
    display: none;
}

/* ---------- Start Screen ---------- */
#startScreen {
    text-align: center;
    padding: 40px;
    background: #43a047;
    border-radius: 20px;
    width: 60%;
    max-width: 400px;
    margin: 50px auto;
    color: white;
}
#startScreen h2 {
    font-size: 1.6em;
    margin-bottom: 20px;
}
#startBtn {
    padding: 15px 25px;
    font-size: 1.2em;
    border: none;
    border-radius: 12px;
    background: #1b5e20;
    color: white;
    cursor: pointer;
}
#startBtn:hover { background: #155d27; }

/* ---------- Quiz Questions ---------- */
#quiz { display: none; }
.question-number { font-size: 0.9em; color: #555; margin-bottom: 5px; }
.question { font-size: 1.3em; margin-bottom: 20px; }
.options button {
    display: block;
    width: 100%;
    margin: 8px 0;
    padding: 14px;
    font-size: 1em;
    border: 2px solid #ccc;
    border-radius: 10px;
    cursor: pointer;
    text-align: left;
    background: #fdfdfd;
    transition: 0.2s;
}
.options button:hover { border-color: #1976d2; background-color: #e3f2fd; }
.options button.selected { background-color: #d4edda; border-color: #43a047; }

.controls {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
}
.controls button {
    padding: 12px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}
#nextBtn { background: #1976d2; color: white; }
#nextBtn:hover { background: #115293; }
#prevBtn { background: #6c757d; color: white; }
#prevBtn:hover { background: #5a6268; }

.progress-bar {
    height: 12px;
    background: #eee;
    border-radius: 6px;
    overflow: hidden;
    margin-top: 20px;
}
.progress {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg,#43a047,#85e085);
    transition: width 0.3s;
}

/* ---------- Review ---------- */
#review { display: none; margin-top: 15px; }
#review h2 { text-align: center; margin-bottom: 10px; font-weight: 600; color: #1976d2; }
.review-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(60px,1fr));
    gap: 12px;
    margin-top: 10px;
}
.review-box {
    padding: 12px;
    text-align: center;
    border-radius: 8px;
    cursor: pointer;
    position: relative; /* <- Needed for flag */
    font-weight: 600;
}
.review-flag {
    position: absolute;
    top: 6px;
    right: 8px;
    color: red;
    font-size: 0.9em;
}

/* ---------- Score Screen ---------- */
#scoreScreen { display: none; text-align: left; margin-top: 20px; max-height: 500px; overflow-y: auto; }
#scoreScreen li { margin: 8px 0; padding: 8px; border-radius: 5px; display: flex; flex-direction: column; gap: 4px; }
.correct-score { color: green; }
.wrong-score { color: red; }

.restart-btn, .clear-btn {
    margin-top: 20px;
    padding: 14px 22px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-weight: 600;
}
.restart-btn { background: #43a047; color: white; }
.restart-btn:hover { background: #388e3c; }
.clear-btn { background: #dc3545; color: white; }
.clear-btn:hover { background: #b02a37; }

</style>
</head>
<body>
<header>Student Dashboard</header>
<div class="container" id="unitContainer"></div>

<div id="quizOverlay">
    <div class="quiz-container">
        <span id="closeQuiz">&times;</span>
        <button id="flagBtn"><i class="fas fa-flag"></i></button>

        <!-- Start Screen -->
        <div id="startScreen">
            <h2>ðŸ“ˆ Unit 1: Investing Vocab ðŸ“ˆ</h2>
            <button class="restart-btn" id="startBtn">Start Quiz</button>
        </div>

        <!-- Quiz -->
        <div id="quiz">
            <div class="question-number" id="questionNumber"></div>
            <div class="question" id="question"></div>
            <div class="options" id="options"></div>
            <div class="controls">
                <button id="prevBtn">Previous</button>
                <button id="nextBtn">Next</button>
            </div>
            <div class="progress-bar"><div class="progress" id="progress"></div></div>
        </div>

        <!-- Review -->
        <div id="review">
            <h2>Review Page</h2>
            <div id="reviewLegend" style="margin-bottom:10px;">
                <span style="color:green;font-weight:bold;">Answered</span> | 
                <span style="color:gray;font-weight:bold;">Not Answered</span> | 
                <i class="fas fa-flag" style="color:red;"></i> Flagged
            </div>
            <div class="review-grid" id="reviewGrid"></div>
            <button class="restart-btn" id="toScoreBtn">Submit Quiz</button>
        </div>

        <!-- Score -->
        <div id="scoreScreen">
            <h3>Your Score</h3>
            <ul id="missedList"></ul>
            <p id="lastScoreText"></p>
            <p id="highScoreText"></p>
            <p id="unitCompleteText" style="color:gold; font-weight:bold;"></p>
            <button class="restart-btn" id="restartBtn">Restart Quiz</button>
            <button class="clear-btn" id="clearDataBtn">Clear Saved Data</button>
        </div>
    </div>
</div>

<script>
// ---------- Unit Card Logic ----------
const units=[{name:"Unit 1: Investing Vocab"}];
const container=document.getElementById('unitContainer');

function renderUnitCard(){
    container.innerHTML='';
    units.forEach(unit=>{
        const card=document.createElement('div'); card.className='unit-card';
        const header=document.createElement('div'); header.className='unit-header';
        const titleDiv=document.createElement('div'); titleDiv.className='title'; 
        titleDiv.textContent=unit.name;

        const unitCompleteStored=localStorage.getItem('unit1Complete')==='true';
        if(unitCompleteStored){
            const uc=document.createElement('span'); uc.className='unit-complete'; uc.textContent='Unit Complete'; 
            titleDiv.prepend(uc);
            const star=document.createElement('i'); star.className='fas fa-star'; star.style.color='gold'; star.style.marginLeft='10px';
            titleDiv.appendChild(star);
        }

        const lastScore=parseInt(localStorage.getItem('unit1LastScore'))||0;
        const highScore=parseInt(localStorage.getItem('unit1HighScore'))||0;
        const scoreDiv=document.createElement('div'); scoreDiv.className='scores'; 
        scoreDiv.textContent=`Last Unit Test Score: ${lastScore}% | Highest Unit Test Score: ${highScore}%`;

        header.appendChild(titleDiv); header.appendChild(scoreDiv);
        card.appendChild(header);

        const dropdown=document.createElement('div'); dropdown.className='unit-dropdown';
        const studyBtn=document.createElement('button'); studyBtn.className='study-btn';
        studyBtn.innerHTML='<i class="fas fa-book"></i> Study';
        studyBtn.onclick=()=>alert(`Study ${unit.name}`);
        const testBtn=document.createElement('button'); testBtn.className='test-btn';
        testBtn.innerHTML='<i class="fas fa-clipboard"></i> Unit Test';
        testBtn.onclick=openQuiz;
        dropdown.appendChild(studyBtn); dropdown.appendChild(testBtn);
        card.appendChild(dropdown);

        card.onclick=()=>{dropdown.style.display=(dropdown.style.display==='flex'?'none':'flex');};
        container.appendChild(card);
    });
}

renderUnitCard();

// ---------- Quiz Data ----------
const quizDataOriginal=[
  {q:"What is a 'stock'?", a:["Share of ownership in a company","Company's debt","A loan from a bank","An investment account"], correct:0, explanation:"Stocks give part ownership in a company and potential profits."},
  {q:"What is a 'bond'?", a:["Loan to a company or government","Ownership share in a company","Bank deposit","Certificate of deposit"], correct:0, explanation:"Bonds are loans you give and earn interest over time."},
  {q:"What is an 'asset'?", a:["Something valuable you own","Money owed by you","A liability","Expected income"], correct:0, explanation:"Assets are things of value that you own."},
  {q:"What is a 'liability'?", a:["Debt you owe","Stock you own","Company profit","Dividend received"], correct:0, explanation:"Liabilities are debts or obligations you owe."},
  {q:"What is a 'dividend'?", a:["Payment to shareholders","Company expense","Stock price change","Loan interest"], correct:0, explanation:"Dividends are profits paid to shareholders."},
  {q:"What is 'capital'?", a:["Money used for investment","Company revenue","Stock price","Savings account"], correct:0, explanation:"Capital is money used to invest in assets."},
  {q:"What is a 'portfolio'?", a:["Collection of investments","Single investment","Bank account","Loan balance"], correct:0, explanation:"A portfolio is your collection of investments."},
  {q:"What is 'risk'?", a:["Chance of losing money","Guaranteed profit","Fixed interest","Company revenue"], correct:0, explanation:"Risk is the possibility of losing money in investments."},
  {q:"What is 'liquidity'?", a:["Ease of converting an asset to cash","Profitability of investment","Type of investment","Company stock value"], correct:0, explanation:"Liquidity shows how easily assets can be converted to cash."},
  {q:"What is 'interest'?", a:["Payment for borrowed money","Profit from stocks","Loan principal","Investment type"], correct:0, explanation:"Interest is the cost of borrowing money."}
];

// ---------- Quiz Logic ----------
let quizData=[], answers=[], flags=[], current=0;
const quizOverlay=document.getElementById('quizOverlay');
const startScreen=document.getElementById('startScreen');
const startBtn=document.getElementById('startBtn');
const flagBtn=document.getElementById('flagBtn');
const quiz=document.getElementById('quiz');
const questionNumberEl=document.getElementById('questionNumber');
const questionEl=document.getElementById('question');
const optionsEl=document.getElementById('options');
const prevBtn=document.getElementById('prevBtn');
const nextBtn=document.getElementById('nextBtn');
const reviewDiv=document.getElementById('review');
const reviewGrid=document.getElementById('reviewGrid');
const toScoreBtn=document.getElementById('toScoreBtn');
const scoreScreen=document.getElementById('scoreScreen');
const missedList=document.getElementById('missedList');
const lastScoreText=document.getElementById('lastScoreText');
const highScoreText=document.getElementById('highScoreText');
const unitCompleteText=document.getElementById('unitCompleteText');
const restartBtn=document.getElementById('restartBtn');
const clearDataBtn=document.getElementById('clearDataBtn');
const closeQuiz=document.getElementById('closeQuiz');
const progressEl=document.getElementById('progress');

function shuffleArray(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];} return a;}

// ---------- Open Quiz ----------
function openQuiz(){
    quizOverlay.style.display='flex';
    startScreen.style.display='block'; quiz.style.display='none'; reviewDiv.style.display='none'; scoreScreen.style.display='none';
    flagBtn.style.display='none';
    quizData=quizDataOriginal.map(q=>({...q}));
    answers=Array(quizData.length).fill(null);
    flags=Array(quizData.length).fill(false);
    current=0;
}

startBtn.onclick=()=>{startScreen.style.display='none'; quiz.style.display='block'; flagBtn.style.display='inline'; loadQuestion();};
closeQuiz.onclick=()=>{quizOverlay.style.display='none';};

function loadQuestion(){
    const q=quizData[current];
    questionNumberEl.textContent=`Question ${current+1} of ${quizData.length}`;
    questionEl.textContent=q.q;
    optionsEl.innerHTML='';
    if(!q.shuffledAnswers) q.shuffledAnswers=shuffleArray([...q.a]);
    q.shuffledAnswers.forEach((opt,i)=>{
        const btn=document.createElement('button'); btn.textContent=opt;
        if(answers[current]===i) btn.classList.add('selected');
        btn.onclick=()=>{answers[current]=i; Array.from(optionsEl.children).forEach(b=>b.classList.remove('selected')); btn.classList.add('selected');};
        optionsEl.appendChild(btn);
    });
    flagBtn.innerHTML=flags[current]?'<i class="fas fa-flag"></i>':'<i class="far fa-flag"></i>';
    progressEl.style.width=`${((current+1)/quizData.length)*100}%`;
}

nextBtn.onclick=()=>{if(current===quizData.length-1){showReview();} else{current++; loadQuestion();}};
prevBtn.onclick
