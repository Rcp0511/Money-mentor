<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Unit 1 ‚Äì Investing Vocabulary</title>

<style>
* { box-sizing: border-box; font-family: Arial, sans-serif; }

body {
  margin: 0;
  background: #f1f5f9;
}

.hidden { display: none; }

button {
  padding: 10px 16px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

/* START SCREEN */
#startScreen {
  height: 100vh;
  background: #16a34a;
  color: white;
  display: flex;
  justify-content: center;
  align-items: center;
}

#startBox {
  text-align: center;
}

#startBox h1 {
  margin-bottom: 20px;
}

#app {
  max-width: 900px;
  margin: 20px auto;
  padding: 10px;
}

/* HEADER */
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

#stats {
  display: flex;
  gap: 15px;
  margin: 10px 0 20px;
}

.stat {
  background: white;
  padding: 8px 12px;
  border-radius: 8px;
}

/* QUIZ BOX */
#quizBox {
  background: white;
  padding: 20px;
  border-radius: 12px;
  max-height: 70vh;
  overflow-y: auto;
}

/* ANSWERS */
.option {
  background: #e5e7eb;
  padding: 10px;
  margin-top: 8px;
  border-radius: 6px;
}

.option.correct { background: #bbf7d0; }
.option.wrong { background: #fecaca; }
.option.unanswered { background: #d1d5db; }

/* CONTROLS */
#controls {
  display: flex;
  justify-content: space-between;
  margin-top: 15px;
  align-items: center;
}

/* REVIEW */
.reviewItem {
  background: #f8fafc;
  padding: 12px;
  border-radius: 8px;
  margin-bottom: 10px;
}
</style>
</head>

<body>

<!-- START -->
<div id="startScreen">
  <div id="startBox">
    <h1>Unit 1 ‚Äì Investing Vocabulary</h1>
    <button id="startBtn">Start Quiz</button>
  </div>
</div>

<!-- APP -->
<div id="app" class="hidden">

<header>
  <h2>Unit 1 ‚Äì Investing Vocabulary</h2>
  <div id="star"></div>
</header>

<div id="stats">
  <div class="stat">Last Unit Test Score: <span id="lastScore">‚Äî</span></div>
  <div class="stat">Highest Unit Test Score: <span id="highScore">‚Äî</span></div>
</div>

<div id="quizBox"></div>

<div id="controls">
  <button id="nextBtn">Next</button>
  <span id="flagBtn" class="hidden">üö©</span>
</div>

<div style="margin-top:15px;">
  <button id="reviewBtn" class="hidden">Review</button>
  <button id="clearBtn">Clear Data</button>
</div>

</div>

<script>
const questions = [
  {
    q: "What is a stock?",
    options: [
      "A loan given to a company",
      "Partial ownership in a company",
      "A government bond"
    ],
    answer: 1,
    explanation: "A stock represents ownership, meaning you own a small part of the company."
  },
  {
    q: "What is diversification?",
    options: [
      "Investing in one company",
      "Spreading investments to reduce risk",
      "Buying only low-risk assets"
    ],
    answer: 1,
    explanation: "Diversification reduces risk by spreading investments across different assets."
  }
];

let current = 0;
let answers = [];
let flags = [];
let score = 0;

const quizBox = document.getElementById("quizBox");
const flagBtn = document.getElementById("flagBtn");

function loadStats() {
  lastScore.textContent = localStorage.getItem("lastScore") || "‚Äî";
  highScore.textContent = localStorage.getItem("highScore") || "‚Äî";
  if (localStorage.getItem("unitComplete")) star.textContent = "‚≠ê Unit Complete";
}

function renderQuestion() {
  flagBtn.classList.remove("hidden");
  quizBox.innerHTML = `<h3>${questions[current].q}</h3>`;

  questions[current].options.forEach((opt,i)=>{
    const d = document.createElement("div");
    d.className = "option";
    d.textContent = opt;
    d.onclick = ()=>selectAnswer(i,d);
    quizBox.appendChild(d);
  });
}

function selectAnswer(i,el) {
  if (answers[current] !== undefined) return;
  answers[current] = i;
  if (i === questions[current].answer) {
    el.classList.add("correct");
    score++;
  } else {
    el.classList.add("wrong");
  }
}

flagBtn.onclick = () => {
  if (!flags.includes(current)) flags.push(current);
};

nextBtn.onclick = () => {
  current++;
  if (current < questions.length) {
    renderQuestion();
  } else {
    finishQuiz();
  }
};

function finishQuiz() {
  flagBtn.classList.add("hidden");
  const percent = Math.round(score / questions.length * 100);

  localStorage.setItem("lastScore", percent + "%");
  const high = parseInt(localStorage.getItem("highScore")) || 0;
  if (percent > high) localStorage.setItem("highScore", percent + "%");
  if (percent >= 90) localStorage.setItem("unitComplete", "true");

  quizBox.innerHTML = `<h3>Your Score: ${percent}%</h3>`;
  reviewBtn.classList.remove("hidden");
  loadStats();
}

reviewBtn.onclick = () => {
  quizBox.innerHTML = "<h3>Review Page</h3>";
  questions.forEach((q,i)=>{
    const div = document.createElement("div");
    div.className = "reviewItem";

    let status = answers[i] === q.answer ? "‚úî" : "‚úñ";
    let flag = flags.includes(i) ? " üö©" : "";

    div.innerHTML = `
      <strong>${status} ${q.q}${flag}</strong>
      <div>${q.explanation}</div>
    `;
    quizBox.appendChild(div);
  });
};

clearBtn.onclick = () => {
  localStorage.clear();
  location.reload();
};

startBtn.onclick = () => {
  startScreen.classList.add("hidden");
  app.classList.remove("hidden");
  loadStats();
  renderQuestion();
};
</script>

</body>
</html>
