<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unit 1 Quiz Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Poppins:wght@500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>

<style>
:root {
    --bg: #f4f7fa;
    --card-bg: white;
    --text: #1c1e21;
    --text-light: #555;
    --green: #43a047;
    --green-dark: #2e7d32;
    --green-darker: #1b5e20;
    --red: #dc3545;
    --red-dark: #b02a37;
    --note-bg: #e8f5e9;
    --note-text: #333;
}

[data-theme="dark"] {
    --bg: #121212;
    --card-bg: #1e1e1e;
    --text: #e0e0e0;
    --text-light: #aaa;
    --red: #ff5252;
    --red-dark: #d32f2f;
    --note-bg: #2a2a2a;
    --note-text: #ddd;
}

body { margin:0; font-family:'Inter', sans-serif; background:var(--bg) url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="%23c8e6c9"/><circle cx="20" cy="20" r="1" fill="%23c8e6c9"/><circle cx="80" cy="80" r="1.5" fill="%23c8e6c9"/><circle cx="30" cy="70" r="1" fill="%23c8e6c9"/><circle cx="70" cy="30" r="1.2" fill="%23c8e6c9"/></svg>') repeat; color:var(--text); transition:all 0.4s; }

header { background:linear-gradient(135deg, #43a047, #2e7d32); color:white; padding:20px 40px; display:flex; justify-content:space-between; align-items:center; box-shadow:0 4px 12px rgba(0,0,0,0.2); font-family:'Poppins',sans-serif; }

.header-left { display:flex; align-items:center; gap:15px; }
.header-title { flex-grow:1; text-align:center; font-size:1.8em; font-weight:600; }
.home-btn { color:white; text-decoration:none; font-size:1.1em; font-weight:600; display:flex; align-items:center; gap:8px; }
.home-btn:hover { opacity:0.9; transform:scale(1.05); }

.header-right { display:flex; flex-direction:column; align-items:center; gap:4px; }

#theme-toggle { background:none; border:none; color:white; font-size:1.8rem; cursor:pointer; padding:4px 8px; transition:transform 0.2s; }
#theme-toggle:hover { transform:scale(1.15); }

#theme-label { font-size:0.75rem; color:white; font-weight:500; opacity:0.9; }

.container { max-width:1100px; margin:40px auto; padding:30px; background:var(--card-bg); border-radius:20px; box-shadow:0 8px 20px rgba(0,0,0,0.1); transition:all 0.4s; }

.unit-card { background:linear-gradient(145deg,#66bb6a,#388e3c); border-radius:20px; margin-bottom:30px; padding:25px 30px; box-shadow:0 8px 20px rgba(0,0,0,0.2); cursor:pointer; transition:transform 0.3s, box-shadow 0.3s; color:white; }
.unit-card:hover { transform:translateY(-5px); box-shadow:0 12px 25px rgba(0,0,0,0.25); }

.unit-header { display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; }
.title { display:flex; align-items:center; gap:12px; font-weight:600; font-size:1.3em; }
.title::before { content:'\f02d'; font-family:"Font Awesome 6 Free"; font-weight:900; color:gold; }
.unit-complete { font-weight:700; color:#ffd700; }
.scores { font-size:1em; color:#e8f5e9; background:rgba(0,0,0,0.2); padding:8px 12px; border-radius:10px; }

.unit-dropdown { display:none; flex-direction:row; gap:20px; margin-top:20px; }
.unit-dropdown button { padding:14px 20px; border:none; border-radius:14px; font-size:1.1em; font-weight:500; color:white; cursor:pointer; transition:transform 0.2s; }
.unit-dropdown button:hover { transform:translateY(-3px); }
.study-btn { background:#43a047; }
.test-btn { background:#1b5e20; }

#startScreen { display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center; height:100%; width:100%; padding:60px 30px; background:#43a047; color:white; border-radius:20px; box-sizing:border-box; }
#startScreen h2 { font-size:2.1rem; margin-bottom:30px; }
#startBtn { padding:18px 55px; font-size:1.45rem; font-weight:600; border:none; border-radius:12px; background:#1b5e20; color:white; cursor:pointer; box-shadow:0 8px 24px rgba(0,0,0,0.3); }
#startBtn:hover { background:#155d27; transform:translateY(-3px); }

#closeQuiz { position:absolute; top:20px; right:20px; font-size:2.4rem; cursor:pointer; color:var(--red); }
[data-theme="dark"] #closeQuiz { color:var(--red-dark); }

#quiz { display:none; padding:30px; }
.question-number { font-size:0.9em; color:var(--text-light); margin-bottom:5px; }
.question { font-size:1.3em; margin-bottom:20px; }
.options button { display:block; width:100%; margin:8px 0; padding:14px; font-size:1em; border:2px solid #ccc; border-radius:10px; cursor:pointer; text-align:left; background:var(--card-bg); transition:0.2s; color:var(--text); }
.options button:hover { border-color:#43a047; background-color:#e8f5e9; }
.options button.selected { background-color:#d4edda; border-color:#43a047; }
[data-theme="dark"] .options button { background:#2a2a2a; border-color:#555; color:#e0e0e0; }
[data-theme="dark"] .options button:hover { border-color:#66bb6a; background:#333; }
[data-theme="dark"] .options button.selected { background:#2e7d32; border-color:#66bb6a; }

.controls { display:flex; justify-content:space-between; margin-top:20px; }
.controls button { padding:12px 20px; border:none; border-radius:8px; cursor:pointer; }
#nextBtn { background:#43a047; color:white; }
#prevBtn { background:#6c757d; color:white; }

.progress-bar { height:12px; background:#eee; border-radius:6px; overflow:hidden; margin-top:20px; }
.progress { height:100%; width:0%; background:linear-gradient(90deg,#43a047,#85e085); transition:width 0.3s; }

#review, #scoreScreen { display:none; padding:30px; }
#review h2 { text-align:center; color:#43a047; }
.review-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(60px,1fr)); gap:12px; }
.review-box { padding:12px; text-align:center; border-radius:8px; cursor:pointer; font-weight:600; background:#e9ecef; }
.review-box[style*="d4edda"] { background:#d4edda; }

#scoreScreen li { margin:8px 0; padding:8px; border-radius:5px; }
.correct-score { color:green; }
.wrong-score { color:red; }

.restart-btn { background:#43a047; color:white; padding:14px 22px; border:none; border-radius:10px; font-weight:600; cursor:pointer; }
.clear-btn { background:#dc3545; color:white; padding:14px 22px; border:none; border-radius:10px; font-weight:600; cursor:pointer; }

.warning-note { text-align:center; font-size:0.9em; color:var(--note-text); margin:20px auto; padding:10px; background:var(--note-bg); border-radius:10px; max-width:600px; transition:all 0.4s; }
</style>
</head>
<body>

<header>
    <div class="header-left">
        <a href="https://sites.google.com/view/money--mentor/home" class="home-btn"><i class="fas fa-home"></i> Go to Homepage</a>
    </div>
    <div class="header-title">Student Dashboard</div>
    <div class="header-right">
        <button id="theme-toggle"><i class="far fa-lightbulb"></i></button>
        <div id="theme-label">Light / Dark</div>
    </div>
</header>

<div class="container" id="unitContainer"></div>

<div class="warning-note"><i class="fas fa-info-circle"></i> Data does not sync across devices. Scores and progress are stored locally in your browser.</div>

<div id="quizOverlay">
    <div class="quiz-container">
        <span id="closeQuiz">Ã—</span>
        <div id="startScreen">
            <h2>ðŸ“ˆ Unit 1: Investing Vocab ðŸ“ˆ</h2>
            <button id="startBtn" class="restart-btn">Start Quiz</button>
        </div>
        <div id="quiz">
            <div class="question-number" id="questionNumber"></div>
            <div class="question" id="question"></div>
            <div class="options" id="options"></div>
            <div class="controls">
                <button id="prevBtn">Previous</button>
                <button id="nextBtn">Next</button>
            </div>
            <div class="progress-bar"><div class="progress" id="progress"></div></div>
        </div>
        <div id="review">
            <h2>Review Page</h2>
            <div class="review-grid" id="reviewGrid"></div>
            <button id="toScoreBtn" class="restart-btn">Submit Quiz</button>
        </div>
        <div id="scoreScreen">
            <h3>Your Score</h3>
            <ul id="missedList"></ul>
            <p id="lastScoreText"></p>
            <p id="highScoreText"></p>
            <p id="unitCompleteText" style="color:gold; font-weight:bold;"></p>
            <button id="restartBtn" class="restart-btn">Restart Quiz</button>
            <button id="clearDataBtn" class="clear-btn">Clear Saved Data</button>
        </div>
    </div>
</div>

<script>
// Theme toggle with label
const themeToggle = document.getElementById('theme-toggle');
const html = document.documentElement;

function updateBulb() {
    const isDark = html.getAttribute('data-theme') === 'dark';
    themeToggle.innerHTML = isDark ? '<i class="fas fa-lightbulb"></i>' : '<i class="far fa-lightbulb"></i>';
}

themeToggle.addEventListener('click', () => {
    const current = html.getAttribute('data-theme');
    html.setAttribute('data-theme', current === 'dark' ? 'light' : 'dark');
    updateBulb();
});
updateBulb();

// Unit rendering
const units = [{name:"Unit 1: Investing Vocab", id:'unit1'}];
const container = document.getElementById('unitContainer');
const progressText = document.getElementById('progressText');

function renderUnitCard() {
    container.innerHTML = '';
    let completedCount = 0;
    units.forEach(unit => {
        const card = document.createElement('div');
        card.className = 'unit-card';
        const header = document.createElement('div');
        header.className = 'unit-header';
        const titleDiv = document.createElement('div');
        titleDiv.className = 'title';
        titleDiv.textContent = unit.name;
        const isComplete = localStorage.getItem(unit.id + 'Complete') === 'true';
        if (isComplete) {
            const uc = document.createElement('span');
            uc.className = 'unit-complete';
            uc.textContent = 'Unit Complete';
            titleDiv.prepend(uc);
            const star = document.createElement('i');
            star.className = 'fas fa-star';
            star.style.color = 'gold';
            star.style.marginLeft = '10px';
            titleDiv.appendChild(star);
            completedCount++;
        }
        const lastScore = parseInt(localStorage.getItem(unit.id + 'LastScore')) || 0;
        const highScore = parseInt(localStorage.getItem(unit.id + 'HighScore')) || 0;
        const scoreDiv = document.createElement('div');
        scoreDiv.className = 'scores';
        scoreDiv.textContent = `Last: ${lastScore}% | Best: ${highScore}%`;
        header.appendChild(titleDiv);
        header.appendChild(scoreDiv);
        card.appendChild(header);
        const dropdown = document.createElement('div');
        dropdown.className = 'unit-dropdown';
        const studyBtn = document.createElement('button');
        studyBtn.className = 'study-btn';
        studyBtn.innerHTML = '<i class="fas fa-book"></i> Study';
        studyBtn.onclick = () => alert(`Study ${unit.name}`);
        const testBtn = document.createElement('button');
        testBtn.className = 'test-btn';
        testBtn.innerHTML = '<i class="fas fa-clipboard"></i> Unit Test';
        testBtn.onclick = openQuiz;
        dropdown.appendChild(studyBtn);
        dropdown.appendChild(testBtn);
        card.appendChild(dropdown);
        card.onclick = () => {
            dropdown.style.display = dropdown.style.display === 'flex' ? 'none' : 'flex';
        };
        container.appendChild(card);
    });
    progressText.textContent = `${completedCount} out of ${units.length} units completed`;
}
renderUnitCard();

// Quiz logic
const quizDataOriginal = [
  {q:"What is a 'stock'?", a:["Share of ownership in a company","Debt issued by a company","A bank savings account","A type of bond"], correct:0, explanation:"Stocks represent part ownership in a company and potential profits."},
  {q:"What is a 'bond'?", a:["Loan to a company or government","Share of ownership in a company","An interest-bearing account","A type of insurance"], correct:0, explanation:"Bonds are loans you give to companies or governments in exchange for interest."},
  {q:"What is an 'asset'?", a:["Something valuable you own","Debt you owe","Potential future income","An expense item"], correct:0, explanation:"Assets are valuable resources you own, either physical or financial."},
  {q:"What is a 'liability'?", a:["Debt or obligation you owe","A company's owned stock","A shareholder payment","A financial asset"], correct:0, explanation:"Liabilities are obligations or debts owed to others."},
  {q:"What is a 'dividend'?", a:["Payment to shareholders","Company retained earnings","Stock price change","Interest on a bond"], correct:0, explanation:"Dividends are profits distributed to shareholders."},
  {q:"What is 'capital'?", a:["Money used for investment","Company revenue","Loan principal","Dividend earnings"], correct:0, explanation:"Capital is money allocated for investment purposes."},
  {q:"What is a 'portfolio'?", a:["Collection of investments","Single stock holding","Bank savings account","Outstanding debt"], correct:0, explanation:"A portfolio is your complete collection of financial investments."},
  {q:"What is 'risk'?", a:["Possibility of losing money","Guaranteed investment return","Fixed interest payment","Company revenue growth"], correct:0, explanation:"Risk is the chance that an investmentâ€™s actual return will differ from expected."},
  {q:"What is 'liquidity'?", a:["Ease of converting an asset to cash","Profitability of an investment","Market demand for stocks","Long-term investment potential"], correct:0, explanation:"Liquidity indicates how quickly an asset can be converted to cash without losing value."},
  {q:"What is 'interest'?", a:["Payment for borrowed money","Profit from stock sales","Investment principal","Dividend received"], correct:0, explanation:"Interest is the cost of borrowing money, usually expressed as a percentage."}
];

let quizData = [], answers = [], current = 0;
const quizOverlay = document.getElementById('quizOverlay');
const startScreen = document.getElementById('startScreen');
const startBtn = document.getElementById('startBtn');
const closeQuiz = document.getElementById('closeQuiz');
const quiz = document.getElementById('quiz');
const questionNumberEl = document.getElementById('questionNumber');
const questionEl = document.getElementById('question');
const optionsEl = document.getElementById('options');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const reviewDiv = document.getElementById('review');
const reviewGrid = document.getElementById('reviewGrid');
const toScoreBtn = document.getElementById('toScoreBtn');
const scoreScreen = document.getElementById('scoreScreen');
const missedList = document.getElementById('missedList');
const lastScoreText = document.getElementById('lastScoreText');
const highScoreText = document.getElementById('highScoreText');
const unitCompleteText = document.getElementById('unitCompleteText');
const restartBtn = document.getElementById('restartBtn');
const clearDataBtn = document.getElementById('clearDataBtn');
const progressEl = document.getElementById('progress');

function shuffleArray(a) { for (let i = a.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [a[i], a[j]] = [a[j], a[i]]; } return a; }

function openQuiz() {
    quizOverlay.style.display = 'flex';
    startScreen.style.display = 'flex';
    quiz.style.display = 'none';
    reviewDiv.style.display = 'none';
    scoreScreen.style.display = 'none';
    quizData = quizDataOriginal.map(q => ({...q}));
    answers = Array(quizData.length).fill(null);
    current = 0;
}

startBtn.onclick = () => { startScreen.style.display = 'none'; quiz.style.display = 'block'; loadQuestion(); };
closeQuiz.onclick = () => { quizOverlay.style.display = 'none'; };

function loadQuestion() {
    const q = quizData[current];
    questionNumberEl.textContent = `Question ${current + 1} of ${quizData.length}`;
    questionEl.textContent = q.q;
    optionsEl.innerHTML = '';
    if (!q.shuffledAnswers) q.shuffledAnswers = shuffleArray([...q.a]);
    q.shuffledAnswers.forEach((opt, i) => {
        const btn = document.createElement('button');
        btn.textContent = opt;
        if (answers[current] === i) btn.classList.add('selected');
        btn.onclick = () => {
            answers[current] = i;
            Array.from(optionsEl.children).forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
        };
        optionsEl.appendChild(btn);
    });
    progressEl.style.width = `${((current + 1) / quizData.length) * 100}%`;
}

nextBtn.onclick = () => { if (current === quizData.length - 1) { showReview(); } else { current++; loadQuestion(); } };
prevBtn.onclick = () => { if (current > 0) { current--; loadQuestion(); } };

function showReview() {
    quiz.style.display = 'none';
    reviewDiv.style.display = 'block';
    reviewGrid.innerHTML = '';
    quizData.forEach((q, i) => {
        const box = document.createElement('div');
        box.className = 'review-box';
        box.style.background = answers[i] !== null ? '#d4edda' : '#ccc';
        box.textContent = `${i + 1}`;
        box.onclick = () => { current = i; reviewDiv.style.display = 'none'; quiz.style.display = 'block'; loadQuestion(); };
        reviewGrid.appendChild(box);
    });
}

toScoreBtn.onclick = showScore;

function showScore() {
    reviewDiv.style.display = 'none';
    scoreScreen.style.display = 'block';
    let correctCount = 0;
    missedList.innerHTML = '';
    quizData.forEach((q, i) => {
        const li = document.createElement('li');
        if (q.shuffledAnswers[answers[i]] === q.a[q.correct]) {
            correctCount++;
            li.className = 'correct-score';
            li.textContent = `Q${i+1}: Correct! âœ…`;
        } else {
            li.className = 'wrong-score';
            li.textContent = `Q${i+1}: Wrong âŒ - ${q.explanation}`;
        }
        missedList.appendChild(li);
    });
    const score = Math.round((correctCount / quizData.length) * 100);
    lastScoreText.textContent = `Last Unit Test Score: ${score}%`;
    let highScore = parseInt(localStorage.getItem('unit1HighScore')) || 0;
    if (score > highScore) {
        localStorage.setItem('unit1HighScore', score);
        highScore = score;
    }
    highScoreText.textContent = `Highest Unit Test Score: ${highScore}%`;
    localStorage.setItem('unit1LastScore', score);
    if (highScore >= 90) {
        unitCompleteText.textContent = 'Unit Complete';
        localStorage.setItem('unit1Complete', 'true');
    } else {
        unitCompleteText.textContent = '';
        localStorage.setItem('unit1Complete', 'false');
    }
    renderUnitCard();
}

restartBtn.onclick = () => {
    answers = Array(quizData.length).fill(null);
    current = 0;
    quiz.style.display = 'block';
    scoreScreen.style.display = 'none';
    loadQuestion();
};

clearDataBtn.onclick = () => {
    localStorage.clear();
    renderUnitCard();
    alert('All saved data cleared.');
};
</script>
</body>
</html>
