<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Money Mentor - Unit 1 Quiz Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
<style>
:root {
    --bg-main: #f4f7fa;
    --bg-card: #ffffff;
    --text-main: #1c1e21;
    --text-light: #555;
    --green-light: #66bb6a;
    --green: #43a047;
    --green-dark: #2e7d32;
    --green-darker: #1b5e20;
    --accent-red: #dc3545;
    --accent-red-dark: #b02a37;
    --shadow: rgba(0,0,0,0.12);
    --pattern: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 120 120"><circle cx="10" cy="10" r="2" fill="%23ffffff22"/><circle cx="60" cy="60" r="3" fill="%23ffffff33"/><circle cx="110" cy="110" r="2" fill="%23ffffff22"/><path d="M0 60 Q30 30 60 60 T120 60" stroke="%23ffffff11" stroke-width="2" fill="none"/><path d="M0 80 Q40 50 80 80 T120 80" stroke="%23ffffff11" stroke-width="1.5" fill="none"/></svg>');
}

[data-theme="light"] {
    --bg-main: #f4f7fa;
    --bg-card: #ffffff;
    --text-main: #1c1e21;
    --text-light: #555;
    --shadow: rgba(0,0,0,0.1);
}

[data-theme="dark"] {
    --bg-main: #0d1117;
    --bg-card: #161b22;
    --text-main: #e6edf3;
    --text-light: #8b949e;
    --shadow: rgba(0,0,0,0.5);
    --accent-red: #ff6b6b;
    --accent-red-dark: #e63946;
}

body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    background: var(--bg-main);
    color: var(--text-main);
    min-height: 100vh;
    transition: all 0.4s ease;
}

header {
    background: linear-gradient(135deg, var(--green), var(--green-dark));
    background-image: var(--pattern), linear-gradient(135deg, var(--green), var(--green-dark));
    color: white;
    padding: 18px 40px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 16px var(--shadow);
    font-family: 'Poppins', sans-serif;
}

.header-left { display: flex; align-items: center; gap: 20px; }
.header-title {
    flex-grow: 1;
    text-align: center;
    font-size: 2rem;
    font-weight: 700;
    letter-spacing: 0.5px;
}
.home-btn {
    color: white;
    text-decoration: none;
    font-size: 1.15rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: 0.2s;
}
.home-btn:hover { opacity: 0.9; transform: scale(1.05); }

.header-right {
    display: flex;
    align-items: center;
    gap: 18px;
    font-size: 0.95rem;
}

#progressText {
    background: rgba(255,255,255,0.22);
    padding: 8px 14px;
    border-radius: 12px;
    font-weight: 600;
}

#themeBtn {
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    padding: 9px 16px;
    border-radius: 10px;
    cursor: pointer;
    font-weight: 600;
    transition: 0.2s;
}
#themeBtn:hover { background: rgba(255,255,255,0.35); }

.container {
    max-width: 1100px;
    margin: 40px auto;
    padding: 0 20px;
}

.intro-image img {
    width: 100%;
    max-width: 700px;
    border-radius: 16px;
    box-shadow: 0 6px 20px var(--shadow);
    display: block;
    margin: 0 auto 30px;
}

.unit-card {
    background: linear-gradient(145deg, var(--green-light), var(--green));
    border-radius: 20px;
    margin-bottom: 30px;
    padding: 28px 32px;
    box-shadow: 0 8px 22px var(--shadow);
    cursor: pointer;
    transition: all 0.3s;
    color: white;
}
.unit-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 14px 30px var(--shadow);
}

.unit-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
}
.title {
    font-size: 1.45rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 12px;
}
.title::before {
    content: '\f02d';
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    color: gold;
}
.unit-complete {
    font-weight: 700;
    color: gold;
    margin-right: 10px;
}
.scores {
    background: rgba(0,0,0,0.2);
    padding: 8px 14px;
    border-radius: 10px;
    font-size: 0.95rem;
}

.unit-dropdown {
    display: none;
    flex-direction: row;
    gap: 20px;
    margin-top: 24px;
}
.unit-dropdown button {
    padding: 14px 28px;
    border: none;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 600;
    color: white;
    cursor: pointer;
    transition: all 0.25s;
}
.study-btn { background: var(--green); }
.test-btn { background: var(--green-darker); }
.unit-dropdown button:hover { transform: translateY(-3px); opacity: 0.95; }

.warning-note {
    text-align: center;
    font-size: 0.95rem;
    color: var(--text-light);
    margin: 30px auto;
    padding: 12px;
    background: rgba(67,160,71,0.12);
    border-radius: 12px;
    max-width: 700px;
}

/* QUIZ OVERLAY */
#quizOverlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.65);
    justify-content: center;
    align-items: center;
    z-index: 1000;
    overflow: auto;
    padding: 20px;
}
.quiz-container {
    background: var(--bg-card);
    border-radius: 20px;
    width: 100%;
    max-width: 920px;
    max-height: 92vh;
    overflow-y: auto;
    box-shadow: 0 10px 40px var(--shadow);
    position: relative;
}
#closeQuiz {
    position: absolute;
    top: 18px;
    right: 22px;
    font-size: 2.2rem;
    cursor: pointer;
    color: var(--accent-red);
    background: none;
    border: none;
}
#closeQuiz:hover { color: var(--accent-red-dark); }

#startScreen {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 520px;
    padding: 50px 30px;
    background: var(--green);
    color: white;
    text-align: center;
    border-radius: 20px;
}
#startScreen h2 {
    font-size: 2.4rem;
    margin: 0 0 35px;
    text-shadow: 0 3px 10px rgba(0,0,0,0.4);
}
#startBtn {
    padding: 18px 60px;
    font-size: 1.5rem;
    font-weight: 700;
    border: none;
    border-radius: 14px;
    background: var(--green-darker);
    color: white;
    cursor: pointer;
    box-shadow: 0 8px 24px rgba(0,0,0,0.35);
    transition: all 0.25s;
}
#startBtn:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 32px rgba(0,0,0,0.4);
}

/* Rest of quiz styles (questions, options, review, score) - adapted for themes */
#quiz { display: none; padding: 40px; }
.question-number { font-size: 1rem; color: var(--text-light); margin-bottom: 8px; }
.question { font-size: 1.4rem; margin-bottom: 25px; font-weight: 600; }
.options button {
    display: block;
    width: 100%;
    margin: 12px 0;
    padding: 16px;
    font-size: 1.1rem;
    text-align: left;
    border: 2px solid #ddd;
    border-radius: 12px;
    background: var(--bg-card);
    color: var(--text-main);
    cursor: pointer;
    transition: 0.2s;
}
.options button:hover { border-color: var(--green); background: rgba(67,160,71,0.08); }
.options button.selected { background: rgba(67,160,71,0.15); border-color: var(--green); font-weight: 600; }

.controls { display: flex; justify-content: space-between; margin: 30px 0; }
.controls button { padding: 12px 28px; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; }
#nextBtn { background: var(--green); color: white; }
#prevBtn { background: #6c757d; color: white; }

.progress-bar { height: 14px; background: #e9ecef; border-radius: 8px; overflow: hidden; margin-top: 20px; }
.progress { height: 100%; width: 0%; background: linear-gradient(90deg, var(--green), #85e085); transition: width 0.4s; }

#review, #scoreScreen { display: none; padding: 40px; }
#review h2, #scoreScreen h3 { text-align: center; color: var(--green); margin-bottom: 20px; }
.review-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(70px, 1fr)); gap: 14px; }
.review-box {
    padding: 14px;
    text-align: center;
    border-radius: 10px;
    cursor: pointer;
    font-weight: 700;
    background: #e9ecef;
}
.review-box[style*="d4edda"] { background: #d4edda; }
.review-flag { position: absolute; top: 6px; right: 8px; color: red; font-size: 1rem; }

#missedList li { margin: 12px 0; padding: 12px; border-radius: 8px; background: #f8f9fa; }
.correct-score { background: #d4edda !important; }
.wrong-score { background: #f8d7da !important; }

.restart-btn, .clear-btn {
    padding: 14px 32px;
    border: none;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    margin: 12px;
}
.restart-btn { background: var(--green); color: white; }
.clear-btn { background: var(--accent-red); color: white; }

/* Dark mode tweaks */
[data-theme="dark"] .quiz-container { background: #161b22; }
[data-theme="dark"] .options button { background: #21262d; border-color: #444; color: #e6edf3; }
[data-theme="dark"] .options button:hover { border-color: #58a55c; background: #2a3d2a; }
[data-theme="dark"] .options button.selected { background: #2f6b32; border-color: #58a55c; }
[data-theme="dark"] .progress-bar { background: #30363d; }
[data-theme="dark"] #review h2, [data-theme="dark"] #scoreScreen h3 { color: #66bb6a; }
</style>
</head>
<body>

<header>
    <div class="header-left">
        <a href="https://sites.google.com/view/money--mentor/home" class="home-btn"><i class="fas fa-home"></i> Go to Homepage</a>
    </div>
    <div class="header-title">Student Dashboard</div>
    <div class="header-right">
        <span id="progressText">0 out of 1 units completed</span>
        <button id="themeBtn">Light Mode</button>
    </div>
</header>

<div class="container">
    <div class="intro-image">
        <img src="https://cdn.vectorstock.com/i/1000v/43/11/little-kids-engaged-in-economic-education-vector-43554311.jpg" alt="Kids learning about investing and finance cartoon">
    </div>

    <div id="unitContainer"></div>

    <div class="warning-note">
        <i class="fas fa-info-circle"></i> Important: Your scores and progress are saved only in this browser. Data does not sync across devices or after clearing browser storage.
    </div>
</div>

<div id="quizOverlay">
    <div class="quiz-container">
        <button id="closeQuiz">&times;</button>
        <div id="startScreen">
            <h2>ðŸ“ˆ Unit 1: Investing Vocabulary ðŸ“ˆ</h2>
            <button id="startBtn">Start Quiz</button>
        </div>
        <div id="quiz">
            <div class="question-number" id="questionNumber"></div>
            <div class="question" id="question"></div>
            <div class="options" id="options"></div>
            <div class="controls">
                <button id="prevBtn">Previous</button>
                <button id="nextBtn">Next</button>
            </div>
            <div class="progress-bar"><div class="progress" id="progress"></div></div>
        </div>
        <div id="review">
            <h2>Review Your Answers</h2>
            <div id="reviewLegend" style="text-align:center; margin:15px 0;">
                <span style="color:#28a745;font-weight:bold;">Answered</span> â€¢ 
                <span style="color:gray;font-weight:bold;">Unanswered</span> â€¢ 
                <i class="fas fa-flag" style="color:red;"></i> Flagged
            </div>
            <div class="review-grid" id="reviewGrid"></div>
            <div style="text-align:center; margin-top:25px;">
                <button class="restart-btn" id="toScoreBtn">Submit & See Score</button>
            </div>
        </div>
        <div id="scoreScreen">
            <h3>Your Quiz Results</h3>
            <ul id="missedList"></ul>
            <p id="lastScoreText"></p>
            <p id="highScoreText"></p>
            <p id="unitCompleteText" style="color:gold; font-weight:bold; font-size:1.3rem; text-align:center;"></p>
            <div style="text-align:center; margin-top:30px;">
                <button class="restart-btn" id="restartBtn">Restart Quiz</button>
                <button class="clear-btn" id="clearDataBtn">Clear Saved Data</button>
            </div>
        </div>
    </div>
</div>

<script>
// Theme toggle
const themeBtn = document.getElementById('themeBtn');
const htmlRoot = document.documentElement;

function updateThemeBtnText() {
    const isDark = htmlRoot.getAttribute('data-theme') === 'dark';
    themeBtn.textContent = isDark ? 'Light Mode' : 'Dark Mode';
}

themeBtn.addEventListener('click', () => {
    const current = htmlRoot.getAttribute('data-theme');
    htmlRoot.setAttribute('data-theme', current === 'dark' ? 'light' : 'dark');
    updateThemeBtnText();
});
updateThemeBtnText();

// Units & rendering
const units = [{ name: "Unit 1: Investing Vocab", id: 'unit1' }];
const unitContainer = document.getElementById('unitContainer');
const progressText = document.getElementById('progressText');

function renderUnitCard() {
    unitContainer.innerHTML = '';
    let completedCount = 0;

    units.forEach(unit => {
        const card = document.createElement('div');
        card.className = 'unit-card';

        const header = document.createElement('div');
        header.className = 'unit-header';

        const titleDiv = document.createElement('div');
        titleDiv.className = 'title';
        titleDiv.textContent = unit.name;

        const isComplete = localStorage.getItem(unit.id + 'Complete') === 'true';
        if (isComplete) {
            const uc = document.createElement('span');
            uc.className = 'unit-complete';
            uc.textContent = 'Unit Complete';
            titleDiv.prepend(uc);
            const star = document.createElement('i');
            star.className = 'fas fa-star';
            star.style.color = 'gold';
            star.style.marginLeft = '12px';
            titleDiv.appendChild(star);
            completedCount++;
        }

        const lastScore = parseInt(localStorage.getItem(unit.id + 'LastScore')) || 0;
        const highScore = parseInt(localStorage.getItem(unit.id + 'HighScore')) || 0;

        const scoreDiv = document.createElement('div');
        scoreDiv.className = 'scores';
        scoreDiv.textContent = `Last: ${lastScore}% | Best: ${highScore}%`;
        header.appendChild(titleDiv);
        header.appendChild(scoreDiv);

        card.appendChild(header);

        const dropdown = document.createElement('div');
        dropdown.className = 'unit-dropdown';

        const studyBtn = document.createElement('button');
        studyBtn.className = 'study-btn';
        studyBtn.innerHTML = '<i class="fas fa-book"></i> Study';
        studyBtn.onclick = () => alert(`Study mode for ${unit.name} coming soon!`);
        dropdown.appendChild(studyBtn);

        const testBtn = document.createElement('button');
        testBtn.className = 'test-btn';
        testBtn.innerHTML = '<i class="fas fa-clipboard"></i> Unit Test';
        testBtn.onclick = openQuiz;
        dropdown.appendChild(testBtn);

        card.appendChild(dropdown);

        card.onclick = (e) => {
            if (e.target.tagName !== 'BUTTON') {
                dropdown.style.display = dropdown.style.display === 'flex' ? 'none' : 'flex';
            }
        };

        unitContainer.appendChild(card);
    });

    progressText.textContent = `${completedCount} out of ${units.length} units completed`;
}

renderUnitCard();

// Quiz logic (your original + fixes)
const quizDataOriginal = [
    {q:"What is a 'stock'?", a:["Share of ownership in a company","Debt issued by a company","A bank savings account","A type of bond"], correct:0, explanation:"Stocks represent part ownership in a company and potential profits."},
    {q:"What is a 'bond'?", a:["Loan to a company or government","Share of ownership in a company","An interest-bearing account","A type of insurance"], correct:0, explanation:"Bonds are loans you give to companies or governments in exchange for interest."},
    {q:"What is an 'asset'?", a:["Something valuable you own","Debt you owe","Potential future income","An expense item"], correct:0, explanation:"Assets are valuable resources you own, either physical or financial."},
    {q:"What is a 'liability'?", a:["Debt or obligation you owe","A company's owned stock","A shareholder payment","A financial asset"], correct:0, explanation:"Liabilities are obligations or debts owed to others."},
    {q:"What is a 'dividend'?", a:["Payment to shareholders","Company retained earnings","Stock price change","Interest on a bond"], correct:0, explanation:"Dividends are profits distributed to shareholders."},
    {q:"What is 'capital'?", a:["Money used for investment","Company revenue","Loan principal","Dividend earnings"], correct:0, explanation:"Capital is money allocated for investment purposes."},
    {q:"What is a 'portfolio'?", a:["Collection of investments","Single stock holding","Bank savings account","Outstanding debt"], correct:0, explanation:"A portfolio is your complete collection of financial investments."},
    {q:"What is 'risk'?", a:["Possibility of losing money","Guaranteed investment return","Fixed interest payment","Company revenue growth"], correct:0, explanation:"Risk is the chance that an investmentâ€™s actual return will differ from expected."},
    {q:"What is 'liquidity'?", a:["Ease of converting an asset to cash","Profitability of an investment","Market demand for stocks","Long-term investment potential"], correct:0, explanation:"Liquidity indicates how quickly an asset can be converted to cash without losing value."},
    {q:"What is 'interest'?", a:["Payment for borrowed money","Profit from stock sales","Investment principal","Dividend received"], correct:0, explanation:"Interest is the cost of borrowing money, usually expressed as a percentage."}
];

let quizData = [], answers = [], flags = [], current = 0;

const quizOverlay = document.getElementById('quizOverlay');
const startScreen = document.getElementById('startScreen');
const startBtn = document.getElementById('startBtn');
const closeQuiz = document.getElementById('closeQuiz');
const quiz = document.getElementById('quiz');
const questionNumberEl = document.getElementById('questionNumber');
const questionEl = document.getElementById('question');
const optionsEl = document.getElementById('options');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const reviewDiv = document.getElementById('review');
const reviewGrid = document.getElementById('reviewGrid');
const toScoreBtn = document.getElementById('toScoreBtn');
const scoreScreen = document.getElementById('scoreScreen');
const missedList = document.getElementById('missedList');
const lastScoreText = document.getElementById('lastScoreText');
const highScoreText = document.getElementById('highScoreText');
const unitCompleteText = document.getElementById('unitCompleteText');
const restartBtn = document.getElementById('restartBtn');
const clearDataBtn = document.getElementById('clearDataBtn');
const progressEl = document.getElementById('progress');

function shuffleArray(a) {
    for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
}

function openQuiz() {
    quizOverlay.style.display = 'flex';
    startScreen.style.display = 'flex';
    quiz.style.display = 'none';
    reviewDiv.style.display = 'none';
    scoreScreen.style.display = 'none';
    quizData = quizDataOriginal.map(q => ({...q}));
    answers = Array(quizData.length).fill(null);
    flags = Array(quizData.length).fill(false);
    current = 0;
}

startBtn.onclick = () => {
    startScreen.style.display = 'none';
    quiz.style.display = 'block';
    loadQuestion();
};

closeQuiz.onclick = () => {
    quizOverlay.style.display = 'none';
};

function loadQuestion() {
    const q = quizData[current];
    questionNumberEl.textContent = `Question ${current + 1} of ${quizData.length}`;
    questionEl.textContent = q.q;
    optionsEl.innerHTML = '';
    if (!q.shuffledAnswers) q.shuffledAnswers = shuffleArray([...q.a]);
    q.shuffledAnswers.forEach((opt, i) => {
        const btn = document.createElement('button');
        btn.textContent = opt;
        if (answers[current] === i) btn.classList.add('selected');
        btn.onclick = () => {
            answers[current] = i;
            Array.from(optionsEl.children).forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
        };
        optionsEl.appendChild(btn);
    });
    progressEl.style.width = `${((current + 1) / quizData.length) * 100}%`;
}

nextBtn.onclick = () => {
    if (current === quizData.length - 1) {
        showReview();
    } else {
        current++;
        loadQuestion();
    }
};

prevBtn.onclick = () => {
    if (current > 0) {
        current--;
        loadQuestion();
    }
};

function showReview() {
    quiz.style.display = 'none';
    reviewDiv.style.display = 'block';
    reviewGrid.innerHTML = '';
    quizData.forEach((q, i) => {
        const box = document.createElement('div');
        box.className = 'review-box';
        box.style.background = answers[i] !== null ? '#d4edda' : '#ccc';
        box.textContent = `${i + 1}`;
        if (flags[i]) {
            const flagIcon = document.createElement('i');
            flagIcon.className = 'fas fa-flag review-flag';
            box.appendChild(flagIcon);
        }
        box.onclick = () => {
            current = i;
            reviewDiv.style.display = 'none';
            quiz.style.display = 'block';
            loadQuestion();
        };
        reviewGrid.appendChild(box);
    });
}

toScoreBtn.onclick = showScore;

function showScore() {
    reviewDiv.style.display = 'none';
    scoreScreen.style.display = 'block';
    let correctCount = 0;
    missedList.innerHTML = '';
    quizData.forEach((q, i) => {
        const li = document.createElement('li');
        const isCorrect = q.shuffledAnswers[answers[i]] === q.a[q.correct];
        if (isCorrect) {
            correctCount++;
            li.className = 'correct-score';
            li.textContent = `Q${i+1}: Correct! âœ…`;
        } else {
            li.className = 'wrong-score';
            li.textContent = `Q${i+1}: Wrong âŒ - ${q.explanation}`;
        }
        missedList.appendChild(li);
    });
    const score = Math.round((correctCount / quizData.length) * 100);
    lastScoreText.textContent = `Last Score: ${score}%`;
    let highScore = parseInt(localStorage.getItem('unit1HighScore')) || 0;
    if (score > highScore) {
        localStorage.setItem('unit1HighScore', score);
        highScore = score;
    }
    highScoreText.textContent = `High Score: ${highScore}%`;

    localStorage.setItem('unit1LastScore', score);

    const isComplete = highScore >= 90;
    localStorage.setItem('unit1Complete', isComplete);
    unitCompleteText.textContent = isComplete ? 'ðŸŽ‰ Unit 1 Completed!' : '';

    renderUnitCard();
}

restartBtn.onclick = () => {
    answers = Array(quizData.length).fill(null);
    flags = Array(quizData.length).fill(false);
    current = 0;
    scoreScreen.style.display = 'none';
    quiz.style.display = 'block';
    loadQuestion();
};

clearDataBtn.onclick = () => {
    localStorage.clear();
    renderUnitCard();
    alert('All saved quiz data cleared.');
};
</script>
</body>
</html>
