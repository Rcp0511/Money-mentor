<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Unit 1 Quiz Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Poppins:wght@500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
<style>
/* CSS VARIABLES */
:root {
    --bg: #f4f7fa;
    --card-bg: white;
    --text: #1c1e21;
    --text-light: #555;
    --green: #43a047;
    --green-dark: #2e7d32;
    --red: #dc3545;
    --note-bg: #e8f5e9;
    --option-selected-bg: #d4edda;
    --option-selected-border: #43a047;
}
[data-theme="dark"] {
    --bg: #121212;
    --card-bg: #1e1e1e;
    --text: #e0e0e0;
    --text-light: #aaa;
    --red: #ff5252;
    --note-bg: #2a2a2a;
    --option-selected-bg: #1f3a22;
    --option-selected-border: #66bb6a;
}

/* BASE STYLES */
body {
    margin:0;
    font-family:'Inter', sans-serif;
    background:var(--bg);
    color:var(--text);
    transition:all 0.35s;
}

/* HEADER */
header {
    background:linear-gradient(135deg, #43a047, #2e7d32);
    color:white;
    padding:18px 32px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow:0 4px 12px rgba(0,0,0,0.2);
    font-family: 'Poppins', sans-serif;
    font-size:1.6em;
    font-weight:600;
}
.header-left, .header-right { display:flex; align-items:center; gap:15px; }
.nav-btn {
    border:none; cursor:pointer; font-weight:700; border-radius:12px;
    padding:8px 14px; display:flex; align-items:center; gap:8px; font-size:0.9rem;
}
.back-btn { background:#0f3d1f; color:white; }
.videos-btn { background:rgba(255,255,255,0.2); color:white; }

/* UNIT CARDS */
.container { max-width:1100px; margin:40px auto; padding:20px; }
.unit-card {
    background:linear-gradient(145deg,#66bb6a,#388e3c);
    border-radius:20px; padding:25px; margin-bottom:25px;
    color:white; cursor:pointer; box-shadow:0 8px 20px rgba(0,0,0,0.2);
    position:relative; overflow:hidden;
}
.unit-header { display:flex; justify-content:space-between; align-items:center; }
.unit-title { font-size:1.4em; font-weight:700; display:flex; align-items:center; gap:10px; }
.unit-dropdown { display:none; flex-direction:column; gap:15px; margin-top:20px; }
.unit-dropdown button {
    padding:15px; border:none; border-radius:12px; font-size:1.1em;
    font-weight:700; color:white; cursor:pointer; display:flex;
    align-items:center; justify-content:center; gap:10px;
}
.study-btn { background:#43a047; }
.test-btn { background:#1b5e20; }

/* OVERLAYS (QUIZ & STUDY) */
.overlay {
    display:none; position:fixed; top:0; left:0; width:100%; height:100%;
    background:rgba(0,0,0,0.7); z-index:1000; justify-content:center; align-items:center;
}
.overlay-content {
    background:var(--card-bg); width:95%; max-width:800px; padding:30px;
    border-radius:20px; position:relative; max-height:90vh; overflow-y:auto;
    box-shadow:0 10px 30px rgba(0,0,0,0.3);
}
.close-btn {
    position:absolute; top:15px; right:20px; font-size:2em; cursor:pointer; color:var(--red);
    line-height:1; z-index:10;
}

/* STUDY FLASHCARDS */
.flashcard {
    background:var(--bg); padding:40px 20px; border-radius:15px;
    text-align:center; margin-bottom:20px; min-height:150px;
    display:flex; flex-direction:column; justify-content:center;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
}
#front { font-size:1.8em; font-weight:800; color:var(--green); }
#back { font-size:1.2em; color:var(--text); display:none; }
.study-controls { display:flex; justify-content:space-between; gap:10px; margin-top:20px; }
.control-btn {
    padding:12px 20px; border:none; border-radius:10px; cursor:pointer;
    font-weight:700; flex:1; font-size:1em; color:white;
}
#flipBtn { background:#555; width:100%; margin-bottom:15px; }
#studyPrevBtn { background:#6c757d; }
#studyNextBtn { background:#43a047; }

/* QUIZ STYLES */
.options button {
    width:100%; padding:15px; margin:8px 0; border:2px solid #ccc;
    border-radius:10px; background:var(--card-bg); color:var(--text);
    cursor:pointer; text-align:left; font-size:1em;
}
.options button.selected { background:var(--option-selected-bg); border-color:var(--option-selected-border); }

/* UTILS */
.hidden { display:none !important; }
.flex { display:flex !important; }
</style>
</head>
<body>

<header>
    <div class="header-left">
        <button class="nav-btn back-btn" onclick="location.href='https://sites.google.com/view/money--mentor/home'">Back</button>
    </div>
    <div>Student Dashboard</div>
    <div class="header-right">
        <button class="nav-btn" id="themeBtn">Theme</button>
    </div>
</header>

<div class="container" id="unitContainer">
    </div>

<div id="studyOverlay" class="overlay">
    <div class="overlay-content">
        <span class="close-btn" id="closeStudy">&times;</span>
        <h2 style="text-align:center; color:var(--green);">Flashcards</h2>
        <div class="flashcard">
            <div id="front">Term</div>
            <div id="back">Definition</div>
        </div>
        <button class="control-btn" id="flipBtn">Flip Card</button>
        <div class="study-controls">
            <button class="control-btn" id="studyPrevBtn">Previous</button>
            <button class="control-btn" id="studyNextBtn">Next</button>
        </div>
    </div>
</div>

<div id="quizOverlay" class="overlay">
    <div class="overlay-content">
        <span class="close-btn" id="closeQuiz">&times;</span>
        <div id="startScreen" style="text-align:center;">
            <h2>Unit 1 Quiz</h2>
            <button class="control-btn" style="background:var(--green);" id="startQuizBtn">Start</button>
        </div>
        <div id="quizInterface" class="hidden">
            <h3 id="qText">Question?</h3>
            <div class="options" id="optionsBox"></div>
            <div class="study-controls">
                <button class="control-btn" id="quizPrevBtn" style="background:#777;">Prev</button>
                <button class="control-btn" id="quizNextBtn" style="background:var(--green);">Next</button>
            </div>
        </div>
        <div id="scoreScreen" class="hidden" style="text-align:center;">
            <h2>Quiz Complete!</h2>
            <p id="finalScore">Score: 0%</p>
            <button class="control-btn" style="background:#777;" onclick="location.reload()">Close</button>
        </div>
    </div>
</div>

<script>
window.onload = function() {
    console.log("System Starting...");

    // DATA
    const quizData = [
      {q:"What is a 'stock'?", a:["Share of ownership in a company","Debt issued by a company","A bank savings account","A type of bond"], correct:0, explanation:"Stocks represent part ownership."},
      {q:"What is a 'bond'?", a:["Loan to a company or government","Share of ownership in a company","An interest-bearing account","A type of insurance"], correct:0, explanation:"Bonds are loans you give to companies."},
      {q:"What is an 'asset'?", a:["Something valuable you own","Debt you owe","Potential future income","An expense item"], correct:0, explanation:"Assets are valuable resources you own."},
      {q:"What is a 'liability'?", a:["Debt or obligation you owe","A company's owned stock","A shareholder payment","A financial asset"], correct:0, explanation:"Liabilities are debts owed to others."},
      {q:"What is a 'dividend'?", a:["Payment to shareholders","Company retained earnings","Stock price change","Interest on a bond"], correct:0, explanation:"Dividends are profits distributed to shareholders."},
      {q:"What is 'liquidity'?", a:["Ease of converting an asset to cash","Profitability of an investment","Market demand","Long-term potential"], correct:0, explanation:"Liquidity is how fast you can get cash."}
    ];

    // DOM ELEMENTS
    const unitContainer = document.getElementById("unitContainer");
    const studyOverlay = document.getElementById("studyOverlay");
    const quizOverlay = document.getElementById("quizOverlay");
    
    // RENDER UNIT CARD
    const card = document.createElement("div");
    card.className = "unit-card";
    card.innerHTML = `
        <div class="unit-header">
            <div class="unit-title"><i class="fas fa-book"></i> Unit 1: Investing Vocab</div>
        </div>
        <div class="unit-dropdown" id="dropdown1">
            <button class="study-btn" id="btnStudy">Study Flashcards</button>
            <button class="test-btn" id="btnTest">Take Quiz</button>
        </div>
    `;
    unitContainer.appendChild(card);

    // TOGGLE DROPDOWN
    card.onclick = function(e) {
        // Prevent closing if clicking buttons
        if(e.target.tagName === 'BUTTON') return;
        const dd = document.getElementById("dropdown1");
        dd.style.display = (dd.style.display === "flex") ? "none" : "flex";
    };

    // STUDY LOGIC
    let studyIndex = 0;
    let isFlipped = false;
    
    document.getElementById("btnStudy").onclick = function() {
        studyOverlay.style.display = "flex";
        loadFlashcard(0);
    };

    document.getElementById("closeStudy").onclick = function() {
        studyOverlay.style.display = "none";
    };

    function loadFlashcard(index) {
        studyIndex = index;
        if(studyIndex < 0) studyIndex = quizData.length - 1;
        if(studyIndex >= quizData.length) studyIndex = 0;
        
        isFlipped = false;
        const item = quizData[studyIndex];
        // Extract term from quotes if possible, else use full question
        const termMatch = item.q.match(/'([^']+)'/);
        const term = termMatch ? termMatch[1] : item.q;
        
        document.getElementById("front").innerText = term;
        document.getElementById("back").innerHTML = `
            <strong>${item.a[item.correct]}</strong><br><br>
            <small style='opacity:0.7'>${item.explanation}</small>
        `;
        
        document.getElementById("front").style.display = "block";
        document.getElementById("back").style.display = "none";
    }

    document.getElementById("flipBtn").onclick = function() {
        isFlipped = !isFlipped;
        document.getElementById("front").style.display = isFlipped ? "none" : "block";
        document.getElementById("back").style.display = isFlipped ? "block" : "none";
    };

    document.getElementById("studyNextBtn").onclick = () => loadFlashcard(studyIndex + 1);
    document.getElementById("studyPrevBtn").onclick = () => loadFlashcard(studyIndex - 1);

    // QUIZ LOGIC
    let quizIndex = 0;
    let score = 0;
    
    document.getElementById("btnTest").onclick = function() {
        quizOverlay.style.display = "flex";
    };
    
    document.getElementById("closeQuiz").onclick = function() {
        quizOverlay.style.display = "none";
    };
    
    document.getElementById("startQuizBtn").onclick = function() {
        document.getElementById("startScreen").classList.add("hidden");
        document.getElementById("quizInterface").classList.remove("hidden");
        loadQuizQuestion(0);
    };

    function loadQuizQuestion(index) {
        quizIndex = index;
        if(quizIndex >= quizData.length) {
            // End Quiz
            document.getElementById("quizInterface").classList.add("hidden");
            document.getElementById("scoreScreen").classList.remove("hidden");
            document.getElementById("finalScore").innerText = "You scored: " + Math.round((score / quizData.length)*100) + "%";
            return;
        }

        const q = quizData[quizIndex];
        document.getElementById("qText").innerText = q.q;
        const optBox = document.getElementById("optionsBox");
        optBox.innerHTML = "";
        
        q.a.forEach((ans, i) => {
            const btn = document.createElement("button");
            btn.innerText = ans;
            btn.onclick = function() {
                // Simple immediate scoring for stability
                if(i === q.correct) score++;
                loadQuizQuestion(quizIndex + 1);
            };
            optBox.appendChild(btn);
        });
    }

    // THEME LOGIC
    document.getElementById("themeBtn").onclick = function() {
        const current = document.documentElement.getAttribute("data-theme");
        document.documentElement.setAttribute("data-theme", current === "dark" ? "light" : "dark");
    };

    // Initialize Theme
    document.documentElement.setAttribute("data-theme", "dark");
};
</script>
</body>
</html>
